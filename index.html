<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <script>
    
    let computerPlay = function(){
      //selection goes from 1 to 10
      let selection = Math.ceil(Math.random()*10);
      
      //PIEDRA
      if(selection >= 1 && selection <4){
        return "piedra";
      }
      //PAPEL
      else if(selection >=4 && selection < 7){
        return "papel";
      }
      //TIJERA
      else {
        return "tijera";
      }
    };

    let playerSelection = function(){
      let selection = prompt("¿Piedra, papel o tijera?");
      return selection;
    };
    
    function playRound(playerSelection, computerSelection){

      playerSelection= playerSelection.toLowerCase();
      computerSelection = computerSelection.toLowerCase();

      if(playerSelection !== computerSelection){

        if(playerSelection === "piedra" && computerSelection === "tijera"){
          console.log(`¡Ganaste! ${playerSelection} vence ${computerSelection}.`);
          return true;
        }
        else if(playerSelection === "tijera" && computerSelection === "papel"){
          console.log(`¡Ganaste! ${playerSelection} vence ${computerSelection}.`);
          return true;
        }
        else if(playerSelection === "papel" && computerSelection === "piedra"){
          console.log(`¡Ganaste! ${playerSelection} vence ${computerSelection}.`);
          return true;
        }else{
          console.log(`¡Perdiste! ${computerSelection} vence ${playerSelection}`);
          return false;
        }
      }
      else {
        console.log(`¡Empate! ${ playerSelection} y ${computerSelection} son iguales.`);
        return "Empate";
      }    
    }
    
    let winner = function(userScore, computerScore){
      if (userScore > computerScore) {
        return "You're a winner!!!";
      } else if (userScore < computerScore) {
        return "You're a loser!";
      } else {
        return "It's a tie!";
      }
    }

    function game(){

      let userScore = 0, computerScore = 0;

      for (let i = 0; i < 5 ; i++){

        let roundResult = playRound(playerSelection(),computerPlay());
        
        if (roundResult === true){
          userScore++;
        } else if (roundResult === false) {
          computerScore++;
        } else {
          continue;
        }
      }

      return winner(userScore, computerScore);
    }
  
    console.log(game());

  </script>
  
</body>
</html>